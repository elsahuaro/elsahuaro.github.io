"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,_toPropertyKey(c.key),c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),Object.defineProperty(a,"prototype",{writable:!1}),a}function _toPropertyKey(a){var b=_toPrimitive(a,"string");return"symbol"===_typeof(b)?b:b+""}function _toPrimitive(a,b){if("object"!==_typeof(a)||null===a)return a;var c=a[Symbol.toPrimitive];if(c!==void 0){var d=c.call(a,b||"default");if("object"!==_typeof(d))return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===b?String:Number)(a)}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _createSuper(a){var b=_isNativeReflectConstruct();return function(){var c,d=_getPrototypeOf(a);if(b){var e=_getPrototypeOf(this).constructor;c=Reflect.construct(d,arguments,e)}else c=d.apply(this,arguments);return _possibleConstructorReturn(this,c)}}function _possibleConstructorReturn(a,b){if(b&&("object"===_typeof(b)||"function"==typeof b))return b;if(void 0!==b)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}var CategorizeVoteScene=/*#__PURE__*/function(a){var b=Math.floor;function c(){var a;return _classCallCheck(this,c),a=d.call(this,"categorize-vote"),a.boleta_x0=85,a.boleta_y0=250,a.boleta_y1=50,a.boleta_x2=0,a.boleta_y2=0,a.boleta_scale0=.15,a.boleta_scale2=1,a.boleta_scale3=.125,a.tapete={},a}_inherits(c,a);var d=_createSuper(c);return _createClass(c,[{key:"init",value:function init(a){this.total=a.total,this.errores=a.errores,this.vote=a.vote,this.conteo=a.conteo}},{key:"create",value:function create(){this.game.input.touch.capture=!1,this.boxlabel=this.add.text(85,this.game.config.height/2+125,"Urna",{font:"30px \"Roboto\"",fill:"black"}),alt_elec?this.addTapeteSon():this.addTapeteFed(),this.totalText=this.add.text(this.game.config.width-140,20,"total: "+this.total,{font:"30px \"Roboto\"",fill:"black"}),this.erroresText=this.add.text(this.game.config.width-167,50,"errores: "+this.errores,{font:"30px \"Roboto\"",fill:"black"}),this.back=this.add.image(120,this.game.config.height/2,"ine-back"),this.back.depth=0,this.front=this.add.image(120,this.game.config.height/2,"ine-front"),this.front.depth=2,this.boleta=this.addBoleta("boleta"),this.voteImg=this.addBoleta(this.vote),this.tweenBoleta1()}},{key:"addBoleta",value:function addBoleta(a){var b=this.add.image(this.boleta_x0,this.boleta_y0,a);return b.setOrigin(0,0),b.scaleX=this.boleta_scale0,b.scaleY=this.boleta_scale0,b.depth=1,b}},{key:"tweenBoleta1",value:function tweenBoleta1(){var a=this;this.tweens.add({targets:this.boleta,duration:500,ease:"Quad.easeInOut",y:this.boleta_y1,onComplete:function onComplete(){a.boleta.depth=3,a.voteImg.depth=3,a.tweenBoleta2()}}),this.tweens.add({targets:this.voteImg,duration:500,ease:"Quad.easeInOut",y:this.boleta_y1})}},{key:"tweenBoleta2",value:function tweenBoleta2(){this.tweens.add({targets:this.boleta,duration:500,ease:"Quad.easeInOut",y:this.boleta_y2,x:this.boleta_x2,scaleX:this.boleta_scale2,scaleY:this.boleta_scale2}),this.tweens.add({targets:this.voteImg,duration:500,ease:"Quad.easeInOut",y:this.boleta_y2,x:this.boleta_x2,scaleX:this.boleta_scale2,scaleY:this.boleta_scale2})}},{key:"addTapeteFed",value:function addTapeteFed(){this.matlabel=this.add.text(800,525,"Tapete",{font:"30px \"Roboto\"",fill:"black"});for(var a=0;a<votes.length;a++){this.tapete[votes[a]]=this.add.image(0,0,"tapete"),this.tapete[votes[a]].setOrigin(0,0);var c=this.tapete[votes[a]].width,d=this.tapete[votes[a]].height,e=490+a%7*c,f=100+b(a/7)*c;this.tapete[votes[a]].x=e,this.tapete[votes[a]].y=f;var g=this.add.text(e,f,votes[a].split("-").join("-").toUpperCase(),{font:"12px \"Roboto\"",fill:"black"});g.x=e+c/2-g.width/2,g.y=f+10,this.tapete[votes[a]].setInteractive(),this.tapete[votes[a]].on("pointerover",this.voteTintSetter(a)),this.tapete[votes[a]].on("pointerout",this.voteTintClearer(a)),this.tapete[votes[a]].on("pointerdown",this.voteCaster(a));var h=this.conteo[votes[a]].correct,j=this.add.text(e,f,""+h,{font:"30px \"Roboto\"",fill:"black"});j.x=e+c/2-j.width/2,j.y=f+d/2-j.height/2+10}}},{key:"addTapeteSon",value:function addTapeteSon(){this.matlabel=this.add.text(800,525,"Tapete",{font:"30px \"Roboto\"",fill:"black"});for(var a=0;a<votes.length;a++){this.tapete[votes[a]]=this.add.image(0,0,"tapete"),this.tapete[votes[a]].setOrigin(0,0);var c=this.tapete[votes[a]].width,d=this.tapete[votes[a]].height,e=490+a%3*c,f=100+b(a/3)*d;this.tapete[votes[a]].x=e,this.tapete[votes[a]].y=f;var g=this.add.text(e,f,partidos_txt_son[votes[a]],{font:"16px \"Roboto\"",fill:"black"});g.x=e+c/2-g.width/2,g.y=f+10;var h=this.add.text(e,f,candidaturas_txt_son[votes[a]],{font:"bold 16px \"Roboto\"",fill:"black"});h.x=e+c/2-h.width/2,h.y=f+this.tapete[votes[a]].height-25,this.tapete[votes[a]].setInteractive(),this.tapete[votes[a]].on("pointerover",this.voteTintSetter(a)),this.tapete[votes[a]].on("pointerout",this.voteTintClearer(a)),this.tapete[votes[a]].on("pointerdown",this.voteCaster(a));var j=this.conteo[votes[a]].correct,k=this.add.text(e,f,""+j,{font:"30px \"Roboto\"",fill:"black"});k.x=e+c/2-k.width/2,k.y=f+d/2-k.height/2+10}}},{key:"voteTintSetter",value:function voteTintSetter(a){var b=this;return function(c){b.tapete[votes[a]].setTint(14626523),c.event.preventDefault()}}},{key:"voteTintClearer",value:function voteTintClearer(a){var b=this;return function(c){b.tapete[votes[a]].clearTint(),c.event.preventDefault()}}},{key:"voteCaster",value:function voteCaster(a){var b=this;return function(c){b.castVote(votes[a]),c.event.preventDefault()}}},{key:"castVote",value:function castVote(a){var b=this;if(a==stack_vote_son[this.vote]){++this.conteo[a].correct;for(var c=0;c<votes.length;c++)this.tapete[votes[c]].clearTint(),this.tapete[votes[c]].off("pointerover"),this.tapete[votes[c]].off("pointerout"),this.tapete[votes[c]].off("pointerdown");var d=this.tapete[a].x,e=this.tapete[a].y;this.tweens.add({targets:[this.boleta,this.voteImg],duration:500,ease:"Quad.easeInOut",x:d,y:e,scaleX:this.boleta_scale3,scaleY:this.boleta_scale3,onComplete:function onComplete(){b.fadeBoleta()}})}else++this.conteo[a].incorrect,this.errores++,this.erroresText.setText("errores: "+this.errores),this.tapete[a].setTint(11871774)}},{key:"fadeBoleta",value:function fadeBoleta(){var a=this;this.tweens.add({targets:[this.boleta,this.voteImg],duration:250,ease:"Quad.easeInOut",alpha:0,onComplete:function onComplete(){a.scene.start("draw-vote",{total:a.total,errores:a.errores,conteo:a.conteo})}})}}]),c}(Phaser.Scene);
