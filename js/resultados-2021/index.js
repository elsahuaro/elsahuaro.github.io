"use strict";function _createForOfIteratorHelper(a,b){var c="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!c){if(Array.isArray(a)||(c=_unsupportedIterableToArray(a))||b&&a&&"number"==typeof a.length){c&&(a=c);var d=0,e=function(){};return{s:e,n:function n(){return d>=a.length?{done:!0}:{done:!1,value:a[d++]}},e:function e(a){throw a},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var f,g=!0,h=!1;return{s:function s(){c=c.call(a)},n:function n(){var a=c.next();return g=a.done,a},e:function e(a){h=!0,f=a},f:function f(){try{g||null==c.return||c.return()}finally{if(h)throw f}}}}function _unsupportedIterableToArray(a,b){if(a){if("string"==typeof a)return _arrayLikeToArray(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);return"Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c?Array.from(a):"Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_arrayLikeToArray(a,b):void 0}}function _arrayLikeToArray(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}var data=!1,data_defs=!1,map=!1,sidebar=!1,secLayer=!1,selectedSec=!1,selectedLayer=!1,defFilter="todos",delFilter="todos",tipo="defs",alfa=1,defcoal={1:{FXM:["JOSE RICARDO PONCE DE LEON HERNANDEZ","MOISES MONRROY FLORES"],MC:["RAMONA RAMIREZ MAC GREW","ALEJANDRA ESTRADA GUTIERREZ"],MORENA:["MANUEL DE JESUS BALDENEBRO ARREDONDO","JULIO ROCHA AVILA"],"PAN-PRI-PRD":["LINA ACOSTA CID","GUADALUPE BELTRAN BOJORQUEZ"],PES:["FABIOLA MARICELA SALDIVAR VELEZ","KARLA KARINA GUEVARA ROMO"],PT:["BLANCA ESTELA URIAS VINGOCHEA","BLANCA ABIGAIL MEDINA MEDRANO"],PVEM:["JESUS RAFAEL GALINDO MEDINA","HECTOR IVAN ORTIZ COBIAN"],"PVEM-PT-MORENA":null,RSP:null},2:{FXM:["GRICELDA GARCIA ROMERO","JANETH ELIZABETH COTA ABREGO"],MC:["MARIA ELENA MORENO DURAZO","MARTHA ELENA CASTILLO OSORIO"],MORENA:null,"PAN-PRI-PRD":["LETICIA AMPARANO GAMEZ","CELINA NORIEGA MONTA\xD1O"],PES:["JOSE FRANCISCO GARCIA VALENCIA","ROMAN FLORES VALENZUELA"],PT:null,PVEM:null,"PVEM-PT-MORENA":["ANA LAURA BERNAL CAMARENA","ESMERALDA VILLA IBARRA"],RSP:["JESUS OCTAVIO PESQUEIRA TAPIA","ANDRES FABIAN GRIJALVA VILLAGRAN"]},3:{FXM:["LUZ MARINA DELGADO TARAZON","KARLA KARINA FLORES ESPINOZA"],MC:["CARLOS ALBERTO LEON GARCIA","JULIO CESAR ARBALLO MORALES"],MORENA:null,"PAN-PRI-PRD":["ARTURO FERNANDEZ DIAZ GONZALEZ","EDUARDO ANTONIO ROMERO CAMPA"],PES:["XOCHITL MARIA GONZALEZ ORTEGA","MARIA FERNANDA YANES ENRIQUEZ"],PT:null,PVEM:null,"PVEM-PT-MORENA":["LORENIA IVETH VALLES SAMPEDRO","ROSANGELA AMAIRANY PE\xD1A ESCALANTE"],RSP:["ROCIO ADILENE PINO PINO","DIANA MICHELLE CASTILLO ESCOBEDO"]},4:{FXM:["JOSE JESUS FLORES VALADEZ","JUANA MARICELA VILLANUEVA PEREZ"],MC:["DANIEL BARANZINI HURTADO","PAULO JOVAN VIELLEDENT MOLINA"],MORENA:["HERIBERTO MARCELO AGUILAR CASTILLO","BERNARDO RIOS CHENO"],"PAN-PRI-PRD":["JESUS SALDA\xD1A LOPEZ","MANUEL DE JESUS BORBON HOLGUIN"],PES:["SILVIA MANUELA URIAS SERRANO","JUDITH ALEJANDRA VALENZUELA MORALES"],PT:["FRANCISCO XAVIER CARLOS GARCIA","MARTHA ALICIA ALVAREZ ZAMBRANO"],PVEM:["FELIPE DAVID MARTINEZ ROBLES","MARCO ANTONIO CARDOSO RODRIGUEZ"],"PVEM-PT-MORENA":null,RSP:["BRENDA ARACELI VALLE GARCIA CORONEL","ANA GABRIELA GARCIA DIONICIO"]},5:{FXM:["CARMEN CECILIA SESTITO FLORES","ROSA ISELA CORONADO CAPERON"],MC:["CARMEN HAYDEE PALACIOS ABECHUCO","KAREN ALMODOVAR CASTILLO"],MORENA:null,"PAN-PRI-PRD":["MARIA CRISTINA MARGARITA GUTIERREZ MAZON","LOURDES GARCIA ROBLES"],PES:["MARIA DEL CARMEN ARAGON MILLANES","MELISA ANGELICA GONZALEZ DIAZ"],PT:null,PVEM:null,"PVEM-PT-MORENA":["MARIA WENDY BRICE\xD1O ZULOAGA","JUDITH CELINA TANORI CORDOVA"],RSP:null},6:{FXM:["NORA DILAN HURTADO VALENZUELA","MARIBEL ARMENTA VALENZUELA"],MC:["EDUARDO FLORES MORENO","FRANCISCO MIGUEL SANCHEZ MEDINA"],MORENA:["GABRIELA MARTINEZ ESPINOZA","OLGA LYDIA QUIROZ LOPEZ"],"PAN-PRI-PRD":["OMAR ALBERTO GUILLEN PARTIDA","TANIA KARLA KAREN ARMENTA LOZADA"],PES:["LEONEL REYES LEYVA","JOSE LEONEL SANTINI PRECIADO"],PT:["MARIA LUISA VEGA CUAMEA","CARMEN YANET HERNANDEZ LEYVA"],PVEM:["ALONSO LARA MARES","RAMON FERNANDO ARVIZU GARCIA"],"PVEM-PT-MORENA":null,RSP:["SERGIO ALEJANDRO IBARRA PARTIDA","LUIS FERNANDO GARCIA REYES"]},7:{FXM:["FRANCISCO MANUEL MARTINEZ MAGALLANES","MIRIAM MARGARITA MAGALLANES ALVAREZ"],MC:["JAVIER RUIZ LOVE","JOSE MANUEL MORALES GARCIA"],MORENA:null,"PAN-PRI-PRD":["PROSPERO MANUEL IBARRA OTERO","JOAQUIN RICARDO FLORES PEREZ"],PES:["ERASMO MELESIO RASCON PAREDES","JOSE ANDRES RAMOS VELDERRAIN"],PT:null,PVEM:null,"PVEM-PT-MORENA":["SHIRLEY GUADALUPE VAZQUEZ ROMERO","GUADALUPE TERESA DE ANDA BELTRAN"],RSP:["OSCAR LUIS ARGUELLES MENDEZ","AGUILEO FELIX AYALA"]}};function initMap(){map=L.map("map"),map.setView([29.1026,-110.97732],7),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:"Map data &copy; OpenStreetMap contributors"}).addTo(map),sidebar=L.control.sidebar({container:"sidebar",autopan:!0}).addTo(map),map.on("click",function(){resetSelection()}),map.on("zoomend",function(){// esconder etiquetas dependiendo del zoom?
}),sidebar.open("informacion"),document.getElementById("select-del").style.display="none"}function resetSelection(){undoSelection();var a=document.getElementById("sec-table");a.innerHTML=""}initMap(),window.addEventListener("load",function(){fetch("/data/secciones_dipfed.json").then(function(a){return a.json()}).then(function(a){fetch("/data/secciones_dipfed_defs.json").then(function(a){return a.json()}).then(function(b){document.getElementById("def-select").value="todos",document.getElementById("del-select").value="todos",document.getElementById("tipo-select").value="defs",document.getElementById("alpha-select").value="100",setupData(a,b),setupMap(),setupBaseMap()})})});function setupData(a,b){data=a,data_defs=b}function setupMap(){map||initMap(),map&&secLayer&&map.removeLayer(secLayer)}var baseMapColors=["#5F4690","#1D6996","#38A6A5","#0F8554","#73AF48","#EDAD08","#E17C05","#CC503E","#94346E","#6F4070","#994E95","#666666"];function defsStyle(a){return{/* stroke */color:"#000000",weight:1,opacity:alfa,/* fill */fill:!0,fillColor:baseMapColors[a.properties["Distrito Federal"]-1],fillOpacity:alfa}}var coalColors={FXM:"#ef60a3",MC:"#ff8200",MORENA:"#b45858","PAN-PRI-PRD":"#669ff1",PES:"#642667",PT:"#e73c3e",PVEM:"#7acc00","PVEM-PT-MORENA":"#f2908f",RSP:"#a6192e"};function ganadoresStyle(a){var b=a.properties["Coalici\xF3n Ganadora"];return b?{/* stroke */color:"#000000",weight:1,opacity:alfa,/* fill */fill:!0,fillColor:coalColors[b],fillOpacity:alfa}:{color:"#000000",weight:1,opacity:alfa,fill:!0,fillColor:"#efefef",fillOpacity:alfa}}function propColorDelta(a){return-.5>a?"#008200":-.5<=a&&-.45>a?"#168F16":-.45<=a&&-.4>a?"#2C9B2C":-.4<=a&&-.35>a?"#42A842":-.35<=a&&-.3>a?"#58B458":-.3<=a&&-.25>a?"#74C174":-.25<=a&&-.2>a?"#90CD90":-.2<=a&&-.15>a?"#ACDAAC":-.15<=a&&-.1>a?"#C7E6C7":-.1<=a&&-.05>a?"#E3F3E3":-.05<=a&&-0>a?"#ffffff":0<a&&+.05>=a?"#ffffff":+.05<a&&+.1>=a?"#F3E3E3":+.1<a&&+.15>=a?"#E6C7C7":+.15<a&&+.2>=a?"#DAACAC":+.2<a&&+.25>=a?"#CD9090":+.25<a&&+.3>=a?"#C17474":+.3<a&&+.35>=a?"#B45858":+.35<a&&+.4>=a?"#A84242":+.4<a&&+.45>=a?"#9B2C2C":+.45<a&&+.5>=a?"#8F1616":+.5<a?"#820000":"#ffffff";/* 0.50 */ /* 0.45 */ /* 0.40 */ /* 0.35 */ /* 0.30 */ /* 0.25 */ /* 0.20 */ /* 0.15 */ /* 0.10 */ /* 0.05 */ /* 0.00 */ /* 0.00 */ /* 0.05 */ /* 0.10 */ /* 0.15 */ /* 0.20 */ /* 0.25 */ /* 0.30 */ /* 0.35 */ /* 0.40 */ /* 0.45 */ /* 0.50 */}function propColor(a){return 0<a&&+.08>=a?"#ffffff":+.08<a&&+.16>=a?"#F3E3E3":+.16<a&&+.24>=a?"#E6C7C7":+.24<a&&+.32>=a?"#DAACAC":+.32<a&&+.4>=a?"#CD9090":+.4<a&&+.48>=a?"#C17474":+.48<a&&+.56>=a?"#B45858":+.56<a&&+.64>=a?"#A84242":+.64<a&&+.72>=a?"#9B2C2C":+.72<a&&+.8>=a?"#8F1616":+.8<a?"#820000":"#ffffff";/* 0.00 */ /* 0.08 */ /* 0.16 */ /* 0.24 */ /* 0.32 */ /* 0.4 */ /* 0.48 */ /* 0.56 */ /* 0.64 */ /* 0.72 */ /* 0.8 */}function partColor(a){return 0<a&&.1>=a?"#FAE6F3":.1<a&&.2>=a?"#F5CCE6":.2<a&&.3>=a?"#F0B3DA":.3<a&&.4>=a?"#EB99CD":.4<a&&.5>=a?"#E780C1":.5<a&&.6>=a?"#E266B4":.6<a&&.7>=a?"#DD4DA8":.7<a&&.8>=a?"#D8339B":.8<a&&.9>=a?"#D31A8F":.9<a?"#CE0082":"#ffffff"}function cuatroteStyle(a){var b=a.properties["4T Proporci\xF3n"];if(!b)return{color:"#000000",weight:1,opacity:alfa,fill:!0,fillColor:"#efefef",fillOpacity:alfa};var c=propColor(b);return{color:"#000000",weight:1,opacity:alfa,fill:!0,fillColor:c,fillOpacity:alfa}}function participacionStyle(a){var b=a.properties["Participaci\xF3n %"];if(!b)return{color:"#000000",weight:1,opacity:alfa,fill:!0,fillColor:"#efefef",fillOpacity:alfa};var c=partColor(b/100);return{color:"#000000",weight:1,opacity:alfa,fill:!0,fillColor:c,fillOpacity:alfa}}function cuatroteDeltaStyle(a){var b=a.properties["4T Delta"];if(!b)return{color:"#000000",weight:1,opacity:alfa,fill:!0,fillColor:"#efefef",fillOpacity:alfa};var c=propColorDelta(b);return{color:"#000000",weight:1,opacity:alfa,fill:!0,fillColor:c,fillOpacity:alfa}}function dispatchStyle(){return"defs"===tipo?ganadoresStyle:"ganadores"===tipo?ganadoresStyle:"part"===tipo?participacionStyle:"4tprop"===tipo?cuatroteStyle:"4tdelta"===tipo?cuatroteDeltaStyle:defsStyle}function defsFilter(a){return!("todos"!=defFilter||"todos"!=delFilter)||("todos"==defFilter?+delFilter==a.properties["Distrito Local"]:"todos"==delFilter?+defFilter==a.properties["Distrito Federal"]:+delFilter==a.properties["Distrito Local"]&&+defFilter==a.properties["Distrito Federal"])}function dispatchFilter(){return defFilter&&delFilter?defsFilter:function(){return!0}}var coals={1:[{rep:"MORENA",grupo:["MORENA"]},{rep:"PAN-PRI-PRD",grupo:["PAN","PRI","PRD","PAN-PRI-PRD","PAN-PRI","PAN-PRD","PRI-PRD"]},{rep:"PT",grupo:["PT"]},{rep:"PVEM",grupo:["PVEM"]},{rep:"MC",grupo:["MC"]},{rep:"PES",grupo:["PES"]},{rep:"FXM",grupo:["FXM"]},{rep:"RSP",grupo:["RSP"]}],2:[{rep:"PVEM-PT-MORENA",grupo:["PVEM","PT","MORENA","PVEM-PT-MORENA","PVEM-PT","PVEM-MORENA","PT-MORENA"]},{rep:"PAN-PRI-PRD",grupo:["PAN","PRI","PRD","PAN-PRI-PRD","PAN-PRI","PAN-PRD","PRI-PRD"]},{rep:"MC",grupo:["MC"]},{rep:"PES",grupo:["PES"]},{rep:"FXM",grupo:["FXM"]},{rep:"RSP",grupo:["RSP"]}],3:[{rep:"PVEM-PT-MORENA",grupo:["PVEM","PT","MORENA","PVEM-PT-MORENA","PVEM-PT","PVEM-MORENA","PT-MORENA"]},{rep:"PAN-PRI-PRD",grupo:["PAN","PRI","PRD","PAN-PRI-PRD","PAN-PRI","PAN-PRD","PRI-PRD"]},{rep:"MC",grupo:["MC"]},{rep:"PES",grupo:["PES"]},{rep:"FXM",grupo:["FXM"]},{rep:"RSP",grupo:["RSP"]}],4:[{rep:"MORENA",grupo:["MORENA"]},{rep:"PAN-PRI-PRD",grupo:["PAN","PRI","PRD","PAN-PRI-PRD","PAN-PRI","PAN-PRD","PRI-PRD"]},{rep:"PT",grupo:["PT"]},{rep:"PVEM",grupo:["PVEM"]},{rep:"MC",grupo:["MC"]},{rep:"PES",grupo:["PES"]},{rep:"FXM",grupo:["FXM"]},{rep:"RSP",grupo:["RSP"]}],5:[{rep:"PVEM-PT-MORENA",grupo:["PVEM","PT","MORENA","PVEM-PT-MORENA","PVEM-PT","PVEM-MORENA","PT-MORENA"]},{rep:"PAN-PRI-PRD",grupo:["PAN","PRI","PRD","PAN-PRI-PRD","PAN-PRI","PAN-PRD","PRI-PRD"]},{rep:"MC",grupo:["MC"]},{rep:"PES",grupo:["PES"]},{rep:"FXM",grupo:["FXM"]},{rep:"RSP",grupo:["RSP"]}],6:[{rep:"MORENA",grupo:["MORENA"]},{rep:"PAN-PRI-PRD",grupo:["PAN","PRI","PRD","PAN-PRI-PRD","PAN-PRI","PAN-PRD","PRI-PRD"]},{rep:"PT",grupo:["PT"]},{rep:"PVEM",grupo:["PVEM"]},{rep:"MC",grupo:["MC"]},{rep:"PES",grupo:["PES"]},{rep:"FXM",grupo:["FXM"]},{rep:"RSP",grupo:["RSP"]}],7:[{rep:"PVEM-PT-MORENA",grupo:["PVEM","PT","MORENA","PVEM-PT-MORENA","PVEM-PT","PVEM-MORENA","PT-MORENA"]},{rep:"PAN-PRI-PRD",grupo:["PAN","PRI","PRD","PAN-PRI-PRD","PAN-PRI","PAN-PRD","PRI-PRD"]},{rep:"MC",grupo:["MC"]},{rep:"PES",grupo:["PES"]},{rep:"FXM",grupo:["FXM"]},{rep:"RSP",grupo:["RSP"]}]};function coalGroups(a){var b,c=a["Distrito Federal"],d="",e=_createForOfIteratorHelper(coals[c]);try{for(e.s();!(b=e.n()).done;){var f=b.value,g=f.grupo.reduce(function(b,c){return b+a[c]},0),h=(100*g/a["Total de Votos Calculados"]).toFixed(2);d+="\n<div class=\"voto-row\" style=\"border-left: ".concat(coalColors[f.rep]," solid .5rem\">\n<img src=\"/img/dipfed-2021/").concat(f.rep,".png\" />\n<strong>").concat(g.toLocaleString(),"</strong>\n<span>(").concat(h,"%)</span>\n</div>\n    ")}}catch(a){e.e(a)}finally{e.f()}return d}function tableHTML_DEF(a){var b=a["Total de Votos Calculados"],c=a["Participaci\xF3n %"].toFixed(2),d=a.Nulos,e=a["Coalici\xF3n Ganadora"],f=a["Distrito Federal"],g=defcoal[f][e][0],h=defcoal[f][e][1],i="\n<h4>Distrito Federal ".concat(f,"</h4>\n<br />\n<div class=\"info-row\">\n  <div><strong>Total de votos</strong> <span>").concat(b.toLocaleString()," (").concat(c,"%)</span></div>\n</div>\n<div class=\"info-row\">\n  <div><strong>Votos nulos</strong> <span>").concat(d.toLocaleString(),"</span></div>\n</div>\n<br />\n<div class=\"info-row\">\n  <div><strong>C. Propietaria</strong> <span>").concat(g,"</span></div>\n  <div><strong>C. Suplente</strong> <span>").concat(h,"</span></div>\n</div>\n<div class=\"votos\">\n  ").concat(coalGroups(a),"\n</div>\n  ");return i}function tableHTML(a){var b="\n<h4>Secci\xF3n ".concat(a.Sección,"</h4>\n<div class=\"info-row\">\n  <div><strong>DEF</strong> <span>").concat(a["Distrito Federal"],"</span></div>\n  <div><strong>DEL</strong> <span>").concat(a["Distrito Local"],"</span></div>\n</div>\n<div class=\"info-row\">\n  <div><strong>Municipio</strong> <span>").concat(a["Nombre Municipio"],"</span></div>\n  <div><strong>Tipo</strong> <span>").concat(a.Tipo,"</span></div>\n</div>\n<br />");if(!a["Total de Votos Calculados"])b+="\n<p><strong>No hay informaci\xF3n del conteo distrital en esta secci\xF3n.</strong></p>\n    ";else{var c=(100*a["4T Proporci\xF3n"]).toFixed(2),d=(0>a["4T Delta"]?"":"+")+(100*a["4T Delta"]).toFixed(2),e=a["Participaci\xF3n %"].toFixed(2),f=a["Total de Votos Calculados"],g=a.Nulos,h=a["Coalici\xF3n Ganadora"],i=a["Distrito Federal"],j=defcoal[i][h][0],k=defcoal[i][h][1];b+="\n<div class=\"info-row\">\n  <div><strong>Total de votos</strong> <span>".concat(f.toLocaleString()," (").concat(e,"%)</span></div>\n</div>\n<div class=\"info-row\">\n  <div><strong>Votos nulos</strong> <span>").concat(g.toLocaleString(),"</span></div>\n</div>\n<div class=\"info-row\">\n  <div><strong>Porcentaje 4T</strong> <span>").concat(c,"% (").concat(d,"%)</span></div>\n</div>\n<br />\n<div class=\"info-row\">\n  <div><strong>C. Propietaria</strong> <span>").concat(j,"</span></div>\n  <div><strong>C. Suplente</strong> <span>").concat(k,"</span></div>\n</div>\n<div class=\"votos\">\n  ").concat(coalGroups(a),"\n</div>\n    ")}return b}function undoSelection(){selectedLayer&&selectedLayer.setStyle(dispatchStyle()({properties:selectedSec})),selectedSec=!1,selectedLayer=!1}function doSelection(){selectedLayer&&selectedLayer.setStyle({color:"#ffff00",weight:4})}function callbackInstall(){return function(a,b){b.on({click:function click(c){L.DomEvent.stop(c),undoSelection(),selectedSec=a.properties,selectedLayer=b,doSelection();var d=document.getElementById("sec-table");d.innerHTML="defs"==tipo?tableHTML_DEF(selectedSec):tableHTML(selectedSec),sidebar.open("datos")}})}}function setupBaseMap(){secLayer=L.geoJSON("defs"==tipo?data_defs:data,{style:dispatchStyle(),filter:dispatchFilter(),onEachFeature:callbackInstall()}).addTo(map),resetSelection()}function flyToFocus(){var a=secLayer.getBounds();if(a.isValid()){var b=document.querySelector(".leaflet-sidebar-content").getBoundingClientRect().width;map.flyToBounds(a,{paddingTopLeft:[b,0]})}}function filtraDEF(a){defFilter=a.target.value,setupMap(),setupBaseMap(),flyToFocus()}function filtraDEL(a){delFilter=a.target.value,setupMap(),setupBaseMap(),flyToFocus()}function filtraTipo(a){tipo=a.target.value,"defs"==tipo?(document.getElementById("del-select").value="todos",delFilter="todos",document.getElementById("select-del").style.display="none"):document.getElementById("select-del").style.display="block",setupMap(),setupBaseMap()}function cambiaAlpha(a){alfa=+a.target.value/100,setupMap(),setupBaseMap()}
